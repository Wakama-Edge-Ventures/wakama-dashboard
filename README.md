Wakama Dashboard â€” Now Playing

Next.js (App Router) UI that displays, in real time, IPFS publications and Solana Devnet transactions for the Wakama Oracle protocol.

Signature
Developed by Wakama Edge Ventures (Wakama.farm) â€” dev@wakama.farm

Supported by Solana Foundation

âœ¨ Features

Now Playing: instant view of latest batches (IPFS CID, Devnet Tx, SHA-256, timestamp).

KPIs: number of files, unique CIDs, on-chain transactions, latest batch time.

Clickable links:

CID â†’ IPFS gateway (configurable)

Tx â†’ Solana Explorer (cluster Devnet)

Refresh button (manual) + optional auto-refresh.

SSR + revalidation: the page reads /api/now on the server to avoid file sync issues.

ğŸ§± Architecture (summary)
publisher  â”€â”€(receipts/*.json)â”€â”€â–¶  tools/build-now.cjs  â”€â”€â–¶  public/now.json
                                             â”‚
                                         GET /api/now
                                             â”‚
                                       Dashboard UI


public/now.json: aggregated snapshot (generated by the publisher).

GET /api/now: returns the content of public/now.json.

src/app/page.tsx: fetches /api/now on the server, sorts by ts desc.

ğŸ”§ Prerequisites

Node.js 18+

The publisher repository set up alongside (to generate public/now.json)

Default expected path: ../wakama-oracle-publisher

âš™ï¸ Environment variables

Create .env.local at the dashboard root:

NEXT_PUBLIC_BASE_URL=http://localhost:3000
NEXT_PUBLIC_RPC=https://api.devnet.solana.com
NEXT_PUBLIC_DASHBOARD_TITLE=Wakama Oracle
NEXT_PUBLIC_IPFS_GATEWAY=https://gateway.pinata.cloud/ipfs


Adjust the IPFS gateway if needed.
The Solana cluster should remain Devnet for the 2-week milestone.

ğŸš€ Getting Started
npm install
npm run dev
# http://localhost:3000/now-playing

ğŸ”Œ Endpoints & Key Files

API: GET /api/now â†’ reads public/now.json (no-store cache)
src/app/api/now/route.ts

Page: src/app/page.tsx (SSR + revalidation)

Snapshot: public/now.json (written by the publisher)

ğŸ“¦ Integration with the Publisher

In ~/dev/wakama/wakama-oracle-publisher:

# Publish a simulated batch + generate now.json
npm run publish_sim

# OR publish from ingest + generate now.json
npm run publish_safe


Snapshot is written to:
../wakama-dashboard/public/now.json
Then reload http://localhost:3000/now-playing (or click Refresh).

ğŸ§ª Quick Tests

Run the dashboard: npm run dev

Publish from the publisher: npm run publish_sim

Verify:

curl -s http://localhost:3000/api/now (totals/items)

Now Playing shows KPIs > 0 and the items table

CID/Tx links open correctly

ğŸ› ï¸ Troubleshooting

Empty page: ensure public/now.json exists and is valid JSON.

/api/now empty: run npm run publish_sim again in the publisher.

Tx not resolved: wait 30â€“60s, then solana confirm <SIG> --url https://api.devnet.solana.com.

Changed .env.local: restart npm run dev.

ğŸ“š Useful Links

Next.js Docs

Solana Explorer (Devnet)

ğŸ“ License & Credits

Â© 2025 Wakama Edge Ventures. All rights reserved.
Developed by Wakama Edge Ventures (Wakama.farm) â€” dev@wakama.farm

Supported by Solana Foundation